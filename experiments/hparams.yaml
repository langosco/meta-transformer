name: depoisoning_sweep
program: ./depoison.py
method: bayes
metric:
    name: val/loss
    goal: minimize
parameters:
    lr:
        distribution: log_uniform_values
        min: 1e-5
        max: 1e-3
    wd:
        distribution: log_uniform_values
        min: 1e-6
        max: 1e-3
    in_factor:
        distribution: log_uniform_values
        min: 1e-2
        max: 1e2
    out_factor:
        distribution: log_uniform_values
        min: 1e-2
        max: 1e2
#    adam_b1:
#        distribution: log_uniform_values
#        min: 0.00001
#        max: 0.1
#    adam_b2:
#        distribution: log_uniform_values
#        min: 0.00001
#        max: 0.1
#    adam_eps:
#        distribution: log_uniform_values
#        min: 1e-10
#        max: 1e-3
    chunk_size:
        value: 1024
    bs:
        values: [16, 32, 64]
    use_embedding:
        value: True
    ndata:
        value: 23_710
    epochs:
        value: 30
    max_runtime:  # in minutes
        value: 120
    dataset:
        value: mnist
command:
    - python3
    - depoison.py
    - --use_wandb
    - ${args}
